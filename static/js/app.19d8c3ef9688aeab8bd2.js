webpackJsonp([1],{105:function(e,t){},106:function(e,t){},107:function(e,t){},108:function(e,t){},109:function(e,t,n){n(105);var s=n(20)(n(56),n(112),null,null);e.exports=s.exports},110:function(e,t,n){n(108);var s=n(20)(n(57),n(115),null,null);e.exports=s.exports},111:function(e,t,n){n(106);var s=n(20)(n(58),n(113),null,null);e.exports=s.exports},112:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"notificationCenter-root"}},[n("transition-group",{attrs:{name:"failed"}},e._l(e.notis,function(t){return n("div",{key:t.name,staticClass:"noti"},[n("div",{staticClass:"icon"},[e._v(" !")]),e._v(" "),n("div",{staticClass:"title"},[e._v(e._s(t.name)+" failed to load! ")])])}))],1)},staticRenderFns:[]}},113:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stage-root",class:{inView:!e.UIState.panelCentered,outOfView:e.UIState.panelCentered}},[n("div",{staticClass:"statBox"},[n("transition",{attrs:{name:"list"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.UIState.panelCentered,expression:"!UIState.panelCentered"}],staticClass:"fifty stat loadedTitle"},[e._v(e._s(e.UIState.selectedAsset.name))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.UIState.panelCentered,expression:"!UIState.panelCentered"}],staticClass:"fifty btn-download",on:{click:e.initiateDownload}},[e._v(" Download "+e._s(e.UIState.selectedAsset.name)+".js")])],1),e._v(" "),n("div",{staticClass:"stage",attrs:{id:"stage"}},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.loadingAsset,expression:"UIState.loadingAsset"}],staticClass:"loadingCover"},[n("div",{staticClass:"loadingText"},[e._v(" Loading...")])])])],1),e._v(" "),e.UIState.selectedAsset.processedData?n("div",{staticClass:"statBox"},["image"==e.UIState.selectedAsset.type?n("div",{attrs:{id:"2dStats"}},[n("div",{key:"width",staticClass:"stat"},[e._v(" \n       Width - "+e._s(e.UIState.selectedAsset.processedData.width)+"\n      ")]),e._v(" "),n("div",{key:"height",staticClass:"stat"},[e._v(" \n       Height - "+e._s(e.UIState.selectedAsset.processedData.height)+"\n      ")])]):e._e(),e._v(" "),"obj"==e.UIState.selectedAsset.type?n("div",{attrs:{id:"3dStats"}},[n("div",{key:"vertices",staticClass:"stat"},[e._v(" \n       Vertices - "+e._s(e.UIState.selectedAsset.processedData.vertices.length)+"\n      ")]),e._v(" "),n("div",{key:"normals",staticClass:"stat"},[e._v(" \n       Normals - "+e._s(e.UIState.selectedAsset.processedData.normals.length)+"\n      ")]),e._v(" "),n("div",{key:"uvs",staticClass:"stat"},[e._v(" \n       UVs - "+e._s(e.UIState.selectedAsset.processedData.UVs.length)+"\n      ")]),e._v(" "),n("div",{key:"faces",staticClass:"stat"},[e._v(" \n       Faces - "+e._s(e.UIState.selectedAsset.processedData.faces.length)+"\n      ")])]):e._e()]):e._e()])},staticRenderFns:[]}},114:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"root"},[n("panel",{attrs:{assets:e.assetStore,UIState:e.UIState}}),e._v(" "),n("stage",{ref:"stage",attrs:{UIState:e.UIState}})],1)])},staticRenderFns:[]}},115:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("div",{staticClass:"pane-root",class:{pane_status_centered:e.UIState.panelCentered,pane_status_left:!e.UIState.panelCentered}},[n("div",{staticClass:"title-root"},[e._v(" \n  TFWGF\n  ")]),e._v(" "),n("transition",{attrs:{name:"verticalSquish",mode:"out-in"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.panelCentered,expression:"UIState.panelCentered"}],staticClass:"descriptor-root"},[e._v(" \n  The friendly web graphics file converter\n  ")])]),e._v(" "),n("notification-center",{ref:"noticenter"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.UIState.panelCentered,expression:"!UIState.panelCentered"}],key:"lib",staticClass:"library-root"},[n("h2",[e._v(" Library")]),e._v(" "),n("div",{attrs:{id:"assetList"}},[n("transition-group",{attrs:{name:"loaded",tag:"div"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.loadingAsset,expression:"UIState.loadingAsset"}],key:"loader",staticClass:"item loading"},[e._v("\n         Loading\n      ")]),e._v(" "),e._l(e.assets,function(t){return n("div",{key:t.name,staticClass:"item",class:{selected:e.UIState.selectedAsset==t},on:{click:function(n){e.selectAsset(t)}}},[e._v(" \n        "+e._s(t.name)+"\n      ")])})],2)],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.panelCentered,expression:"UIState.panelCentered"}],key:"table",staticClass:"conversion-table-root"},[e._m(0),e._v(" "),e._m(1)]),e._v(" "),n("div",{staticClass:"btn-upload-root"},[n("input",{staticClass:"inputfile",attrs:{name:"file",id:"file",type:"file",value:"Upload and Convert",multiple:""},on:{change:e.generate}}),e._v(" "),n("label",{attrs:{for:"file"}},[e._v("Upload and Convert ")])])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"side"},[n("div",{staticClass:"itemType"},[e._v(" OBJ ")])]),e._v(" "),n("div",{staticClass:"divider"}),e._v(" "),n("div",{staticClass:"side"},[n("div",{staticClass:"itemType"},[e._v(" JSON")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"side"},[n("div",{staticClass:"itemType"},[e._v(" Image")])]),e._v(" "),n("div",{staticClass:"divider"}),e._v(" "),n("div",{staticClass:"side"},[n("div",{staticClass:"itemType"},[e._v(" Base64")])])])}]}},36:function(e,t,n){"use strict";var s=n(38),a=n.n(s),i=n(61),r=n.n(i),o=n(21),l=n.n(o),c=n(37);n.d(t,"b",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return p});var d=function(e,t,n){for(var s=0;s<e.length;s++)t[n+s]=e[s]},u=function(e){var t=e.vertices,n=new Float32Array(9*e.faces.length),s=new Float32Array(9*e.faces.length),a=0,i=!0,r=!1,o=void 0;try{for(var c,u=l()(e.faces);!(i=(c=u.next()).done);i=!0){var v=c.value;d(t[v.a.v],n,a),d(t[v.b.v],n,a+3),d(t[v.c.v],n,a+6),a+=9}}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}for(var f=-1,h=0;h<n.length/3;h++){var p=n[3*h+0],m=n[3*h+1],g=n[3*h+2],_=Math.sqrt(p*p+m*m+g*g);_>f&&(f=_)}var w=new THREE.BufferGeometry;w.addAttribute("position",new THREE.BufferAttribute(n,3)),w.addAttribute("normal",new THREE.BufferAttribute(s,3)),w.center(),w.computeVertexNormals();var y=new THREE.MeshLambertMaterial({color:15658734});y.side=THREE.DoubleSide;var C=new THREE.Mesh(w,y);return C.scale.x=C.scale.y=C.scale.z=1/f,C},v=function(e){var t=e.split(".").pop();return t?t.toLowerCase():null},f=function(e){return new a.a(function(t,n){var s=v(e.name),a=null;["png","jpg",".bmp"].includes(s)&&(a="image"),"obj"==s&&(a="obj"),null==a&&n(new Error("Unknown File Type"));var i=new FileReader;i.onload=function(n){t({type:a,name:e.name,data:n.target.result})},i.onerror=function(e){n({message:"Failed to read file"})},"image"==a?i.readAsDataURL(e):i.readAsText(e)})},h=function(e){return new a.a(function(t,n){if("image"==e.type)e.processedData=e.data,e.displayData=new Image,e.displayData.src=e.data,t(e);else{e.processedData=null,e.displayData=null;try{var s=c.Objs.parseObj(e.data),a=u(s);e.processedData=s,e.displayData=a,t(e)}catch(e){n({message:"Failed to process file"})}}})},p=function(e){var t="var PreLoadedAssets = PreLoadedAssets || {};\n";return"image"==e.type?(t+='PreLoadedAssets["'+e.name+'"] = new Image();\n',t+='PreLoadedAssets["'+e.name+'"].src = "'+e.processedData.src+'"'):t+='PreLoadedAssets["'+e.name+'"] = '+r()(e.processedData),t}},37:function(e,t,n){"use strict";(function(e){var t=n(21),s=n.n(t),a=n(38),i=n.n(a),r=n(39),o=n.n(r),l=n(40),c=n.n(l),d=n(65),u=n.n(d);!function(t,n){"object"===u()(e)&&e.exports?e.exports=n():t.Objs=n()}(this,function(){var e={},t=function(){function e(t,n,s){o()(this,e),this.v=t,this.vt=n,this.vn=s}return c()(e,null,[{key:"fromValues",value:function(t){return new e(t[0],t[1],t[2])}}]),e}(),n=function e(t,n,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o()(this,e),this.a=t,this.b=n,this.c=s,this.mi=a},a=function e(){o()(this,e),this.vertices=[],this.normals=[],this.UVs=[],this.faces=[],this.groups={},this.materials=[],this.mtllibs=[]},r=function(e){return"string"==typeof e||e instanceof String},l=function(e,t){return e>=0?e-1:t.length+e},d=function(e){return[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]},u=function(e){return new i.a(function(t,n){var s=new XMLHttpRequest;s.open("GET",e),s.onload=function(){200!=this.status&&n({status:s.status,statusText:s.statusText}),t(s.response)},s.onerror=function(){n({status:s.status,statusText:s.statusText})},s.send()})},v=function(e,t){if(e.length<3)throw new Error("Must have at least 3 vertices to triangulate");if(3==e.length)return[new n(e[0],e[1],e[2],t)];for(var s=[],a=e[0],i=2;i<e.length;i++){var r=e[i-1],o=e[i];s.push(new n(r,o,a,t))}return s};return e.loadObj=function(t){return u(t).then(function(t){return e.parseObj(t)})},e.parseObj=function(e){var n=new a,i=null,o=null;return e.split("\n").forEach(function(e){if(r(e)){var a=e.match(/\S+/g);if(a&&a.length)switch(a[0]){case"g":var c=1==a.length?["default"]:a.slice(1),u=!0,f=!1,h=void 0;try{for(var p,m=s()(c);!(u=(p=m.next()).done);u=!0){var g=p.value;n.groups[g]||(n.groups[g]=[])}}catch(e){f=!0,h=e}finally{try{!u&&m.return&&m.return()}finally{if(f)throw h}}i=c;break;case"v":n.vertices.push(d(a));break;case"vt":n.UVs.push(d(a));break;case"vn":n.normals.push(d(a));break;case"f":if(a.length<3)throw Error("Error: face element must contain at least 3 indices");for(var _=[],w=1;w<a.length;w++){var y=a[w].split("/"),C=l(parseInt(y[0]),n.vertices),b=y[1]?l(parseInt(y[1]),n.UVs):null,S=y[2]?l(parseInt(y[2]),n.normals):null,I=new t(C,b,S);_.push(I)}var U=!0,E=!1,A=void 0;try{for(var x,D=s()(v(_,o));!(U=(x=D.next()).done);U=!0){var T=x.value;if(n.faces.push(T),i){var k=!0,R=!1,L=void 0;try{for(var $,j=s()(i);!(k=($=j.next()).done);k=!0){var F=$.value;n.groups[F].push(T)}}catch(e){R=!0,L=e}finally{try{!k&&j.return&&j.return()}finally{if(R)throw L}}}}}catch(e){E=!0,A=e}finally{try{!U&&D.return&&D.return()}finally{if(E)throw A}}break;case"usemtl":var M=n.materials.indexOf(a[1]);M<0&&(M=n.materials.length,n.materials.push(a[1])),o=M;break;case"mtllib":n.mtllibs.push(a[1])}}}),n},e})}).call(t,n(118)(e))},54:function(e,t,n){n(107);var s=n(20)(n(55),n(114),null,null);e.exports=s.exports},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),a=n.n(s),i=n(110),r=n.n(i),o=n(111),l=n.n(o),c=n(35),d=n(37),u=n(36);t.default={name:"app",components:{Panel:r.a,Stage:l.a},data:function(){return{bus:new c.a,assetStore:[],UIState:{panelCentered:!0,selectedAsset:"",loadingAsset:!1}}},methods:{initiateDownload:function(){console.log("about to DL");var e=n.i(u.a)(this.UIState.selectedAsset),t=document.createElement("a"),s=new Blob([e],{type:"octet/stream"}),a=window.URL.createObjectURL(s);t.setAttribute("href",a),t.setAttribute("download",this.UIState.selectedAsset.name+".js"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},selectAsset:function(e){this.UIState.selectedAsset=e,this.$refs.stage.display.setViewing(e.displayData),console.log("selected:"+e)},loadedFile:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=a()(e);!(t=(i=r.next()).done);t=!0){var o=i.value;if(o.processedData=null,"obj"==o.type)try{o.processedData=d.Objs.parseObj(o.data)}catch(e){o.processedData=null}else o.processedData=new Image,o.processedData.src=o.data;o.processedData?(this.UIState.loadingAsset=!1,this.assetStore.unshift(o),this.selectAsset(o)):this.UIState.loadingAsset=!1}}catch(e){n=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw s}}}},created:function(){var e=this;this.bus.$on("e_loadedFile",function(t){e.loadedFile(t)}),this.bus.$on("e_togglePanelCentered",function(){e.UIState.panelCentered&&(e.UIState.panelCentered=!1)}),this.bus.$on("e_user_selectedAsset",function(t){e.selectAsset(t)}),this.bus.$on("e_user_initiatedDownload",function(){e.initiateDownload()}),this.bus.$on("e_user_initiatedUpload",function(){e.UIState.loadingAsset=!0}),this.bus.$on("e_failedToLoad",function(){e.UIState.loadingAsset=!1})}}},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"NotificationCenter",methods:{insertNoti:function(e){var t=this;console.log("Inserted Noti with name",e);var n={name:e};this.notis.push(n),setTimeout(function(){var e=t.notis.indexOf(n);t.notis.splice(e,1)},4e3)}},mounted:function(){},data:function(){return{notis:[]}}}},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),a=n(109),i=n.n(a);t.default={name:"panel",mounted:function(){this.notiCenter=this.$refs.noticenter},methods:{selectAsset:function(e){this.$parent.bus.$emit("e_user_selectedAsset",e)},generate:function(e){var t=this,a=e.target.files||e.dataTransfer.files;if(a.length){this.$parent.bus.$emit("e_user_initiatedUpload");for(var i=[],r=this,o=0;o<a.length;o++)i.push(a[o]);i.forEach(function(e){n.i(s.b)(e).then(s.c).then(function(e){return t.$parent.bus.$emit("e_loadedFile",[e]),t.$parent.bus.$emit("e_togglePanelCentered"),e},function(t){return console.log(t),r.$parent.bus.$emit("e_failedToLoad"),r.notiCenter.insertNoti(e.name),t}).then(function(){})})}}},props:["assets","UIState"],components:{NotificationCenter:i.a},data:function(){return{notiCenter:null}}}},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(59);t.default={name:"stage",created:function(){},mounted:function(){this.display.setRoot(this.$el.querySelector("#stage"))},methods:{initiateDownload:function(){this.$parent.bus.$emit("e_user_initiatedDownload")}},props:["UIState"],data:function(){return{display:new s.a}}}},59:function(e,t,n){"use strict";var s=n(39),a=n.n(s),i=n(40),r=n.n(i),o=800,l=600,c=new THREE.Vector3(0,0,1.7),d=function(){function e(){a()(this,e),this.root=null,this.container=document.createElement("div"),this.image=null,this.model=null,this.interval=null,this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialiasing:!0,alpha:!0}),this.initScene(o,l),this.renderer.setSize(o,l),this.initListeners()}return r()(e,[{key:"setRoot",value:function(e){this.root=e,this.root.appendChild(this.container)}},{key:"initScene",value:function(e,t){this.renderer.setClearColor(16777215,0),this.camera=new THREE.PerspectiveCamera(75,e/t,.01,100),this.scene.add(this.camera);var n=new THREE.AmbientLight(9408399);this.scene.add(n);var s=new THREE.SpotLight(16777215);s.position.set(0,10,0),this.scene.add(s);this.plane=new THREE.Mesh(new THREE.PlaneGeometry(3,3,4,4),new THREE.MeshBasicMaterial({color:16777215,wireframe:!0})),this.plane.rotation.x=Math.PI/2,this.plane.position.y=-1,this.scene.add(this.plane)}},{key:"initListeners",value:function(){var e=this,t=this.renderer.domElement,n=function(e,t){var n=e.getBoundingClientRect();return[t.clientX-n.left,t.clientY-n.top]},s=!1,a=null;t.addEventListener("mousemove",function(t){if(e.model&&a){var s=n(e.renderer.domElement,t);e.model.rotation.y+=(s[0]-a[0])/100,e.model.rotation.x+=(s[1]-a[1])/100,a=s}}),t.addEventListener("mousedown",function(t){s=!0,a=n(e.renderer.domElement,t)}),t.addEventListener("mouseup",function(){s=!1,a=null});var i=function(t){var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));e.camera.position.z-=n};t.addEventListener("mousewheel",i),t.addEventListener("DOMMouseScroll",i)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"startRendering",value:function(){var e=this;null==this.interval&&(this.interval=setInterval(function(){e.render()},17))}},{key:"stopRendering",value:function(){clearInterval(this.interval),this.interval=null}},{key:"resize",value:function(e,t){this.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}},{key:"setViewing",value:function(e){this.camera.position.copy(c),this.model&&(this.scene.remove(this.model),this.stopRendering(),this.container.removeChild(this.renderer.domElement),this.model=null),this.image&&(this.container.style.background="",this.image=null),e instanceof Image?(this.image=e,this.container.style.backgroundImage="url("+e.src+")",this.container.className="imageBox"):e&&(this.scene.add(e),this.model=e,this.startRendering(),this.container.appendChild(this.renderer.domElement))}}]),e}();t.a=d},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),a=n(54),i=n.n(a);s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:i.a}})}},[60]);
//# sourceMappingURL=app.19d8c3ef9688aeab8bd2.js.map