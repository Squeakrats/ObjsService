webpackJsonp([1],{105:function(e,t){},106:function(e,t){},107:function(e,t){},108:function(e,t){},109:function(e,t,s){s(105);var n=s(20)(s(56),s(112),null,null);e.exports=n.exports},110:function(e,t,s){s(108);var n=s(20)(s(57),s(115),null,null);e.exports=n.exports},111:function(e,t,s){s(106);var n=s(20)(s(58),s(113),null,null);e.exports=n.exports},112:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"notificationCenter-root"}},e._l(e.notis,function(t){return s("div",{staticClass:"noti"},[s("div",{staticClass:"icon"}),e._v(" "),s("div",{staticClass:"title"},[e._v(e._s(t.name)+" failed to load! ")])])}))},staticRenderFns:[]}},113:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"stage-root",class:{inView:!e.UIState.panelCentered,outOfView:e.UIState.panelCentered}},[s("div",{staticClass:"statBox"},[s("transition",{attrs:{name:"list"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.UIState.panelCentered,expression:"!UIState.panelCentered"}],staticClass:"stat loadedTitle"},[e._v(" Viewing - "+e._s(e.UIState.selectedAsset.name))])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.UIState.panelCentered,expression:"!UIState.panelCentered"}],staticClass:"btn-download",on:{click:e.initiateDownload}},[e._v(" Download "+e._s(e.UIState.selectedAsset.name)+"js")])],1),e._v(" "),s("div",{staticClass:"stage",attrs:{id:"stage"}},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.loadingAsset,expression:"UIState.loadingAsset"}],staticClass:"loadingCover"},[s("div",{staticClass:"loadingText"},[e._v(" Loading...")])])])],1),e._v(" "),e.UIState.selectedAsset.processedData?s("div",{staticClass:"statBox"},["image"==e.UIState.selectedAsset.type?s("div",{attrs:{id:"2dStats"}},[s("div",{key:"width",staticClass:"stat"},[e._v(" \n       Width - "+e._s(e.UIState.selectedAsset.processedData.width)+"\n      ")]),e._v(" "),s("div",{key:"height",staticClass:"stat"},[e._v(" \n       Height - "+e._s(e.UIState.selectedAsset.processedData.height)+"\n      ")])]):e._e(),e._v(" "),"obj"==e.UIState.selectedAsset.type?s("div",{attrs:{id:"3dStats"}},[s("div",{key:"vertices",staticClass:"stat"},[e._v(" \n       Vertices - "+e._s(e.UIState.selectedAsset.processedData.vertices.length)+"\n      ")]),e._v(" "),s("div",{key:"normals",staticClass:"stat"},[e._v(" \n       Normals - "+e._s(e.UIState.selectedAsset.processedData.normals.length)+"\n      ")]),e._v(" "),s("div",{key:"uvs",staticClass:"stat"},[e._v(" \n       UVs - "+e._s(e.UIState.selectedAsset.processedData.UVs.length)+"\n      ")]),e._v(" "),s("div",{key:"faces",staticClass:"stat"},[e._v(" \n       Faces - "+e._s(e.UIState.selectedAsset.processedData.faces.length)+"\n      ")])]):e._e()]):e._e()])},staticRenderFns:[]}},114:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"root"},[s("panel",{attrs:{assets:e.assetStore,UIState:e.UIState}}),e._v(" "),s("stage",{ref:"stage",attrs:{UIState:e.UIState}})],1)])},staticRenderFns:[]}},115:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"panel"},[s("div",{staticClass:"pane-root",class:{pane_status_centered:e.UIState.panelCentered,pane_status_left:!e.UIState.panelCentered}},[s("div",{staticClass:"title-root"},[e._v(" \n  TFWGF\n  ")]),e._v(" "),s("transition",{attrs:{name:"verticalSquish",mode:"out-in"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.panelCentered,expression:"UIState.panelCentered"}],staticClass:"descriptor-root"},[e._v(" \n  The friendly web graphics file converter\n  ")])]),e._v(" "),s("transition-group",{attrs:{name:"fade",mode:"in-out",tag:"div"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.UIState.panelCentered,expression:"!UIState.panelCentered"}],key:"lib",staticClass:"library"},[s("h2",[e._v(" Library")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.loadingAsset,expression:"UIState.loadingAsset"}],staticClass:"item loading"},[e._v("\n         Loading\n      ")]),e._v(" "),e._l(e.assets,function(t){return s("div",{staticClass:"item",class:{selected:e.UIState.selectedAsset==t},on:{click:function(s){e.selectAsset(t)}}},[e._v(" \n      "+e._s(t.name)+"\n    ")])})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.UIState.panelCentered,expression:"UIState.panelCentered"}],key:"table",staticClass:"conversion-table-root"},[s("div",{staticClass:"row"},[s("div",{staticClass:"side"},[s("div",{staticClass:"itemType"},[e._v(" OBJ ")])]),e._v(" "),s("div",{staticClass:"divider"}),e._v(" "),s("div",{staticClass:"side"},[s("div",{staticClass:"itemType"},[e._v(" JSON")])])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"side"},[s("div",{staticClass:"itemType"},[e._v(" Image")])]),e._v(" "),s("div",{staticClass:"divider"}),e._v(" "),s("div",{staticClass:"side"},[s("div",{staticClass:"itemType"},[e._v(" Base64")])])])])]),e._v(" "),s("div",{staticClass:"btn-upload-root"},[s("input",{staticClass:"inputfile",attrs:{name:"file",id:"file",type:"file",value:"Upload and Convert",multiple:""},on:{change:e.generate}}),e._v(" "),s("label",{attrs:{for:"file"}},[e._v("Upload and Convert ")])])],1)])},staticRenderFns:[]}},36:function(e,t,s){"use strict";var n=s(38),a=s.n(n),i=s(61),r=s.n(i),o=s(21),l=s.n(o),c=s(37);s.d(t,"b",function(){return h}),s.d(t,"c",function(){return f}),s.d(t,"a",function(){return p});var d=function(e,t,s){for(var n=0;n<e.length;n++)t[s+n]=e[n]},u=function(e){var t=e.vertices,s=new Float32Array(9*e.faces.length),n=new Float32Array(9*e.faces.length),a=0,i=!0,r=!1,o=void 0;try{for(var c,u=l()(e.faces);!(i=(c=u.next()).done);i=!0){var v=c.value;d(t[v.a.v],s,a),d(t[v.b.v],s,a+3),d(t[v.c.v],s,a+6),a+=9}}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}for(var h=-1,f=0;f<s.length/3;f++){var p=s[3*f+0],m=s[3*f+1],g=s[3*f+2],_=Math.sqrt(p*p+m*m+g*g);_>h&&(h=_)}var w=new THREE.BufferGeometry;w.addAttribute("position",new THREE.BufferAttribute(s,3)),w.addAttribute("normal",new THREE.BufferAttribute(n,3)),console.log(w),w.center(),w.computeVertexNormals();var y=new THREE.MeshLambertMaterial({color:15658734});y.side=THREE.DoubleSide;var C=new THREE.Mesh(w,y);return C.scale.x=C.scale.y=C.scale.z=1/h,C},v=function(e){var t=e.split(".").pop();return t?t.toLowerCase():null},h=function(e){return new a.a(function(t,s){var n=v(e.name),a=null;["png","jpg",".bmp"].includes(n)&&(a="image"),"obj"==n&&(a="obj"),null==a&&s(new Error("Unknown File Type"));var i=new FileReader;i.onload=function(s){t({type:a,name:e.name,data:s.target.result})},i.onerror=function(e){s({message:"Failed to read file"})},"image"==a?i.readAsDataURL(e):i.readAsText(e)})},f=function(e){return new a.a(function(t,s){if("image"==e.type)e.processedData=e.data,e.displayData=new Image,e.displayData.src=e.data,t(e);else{e.processedData=null,e.displayData=null;try{var n=c.Objs.parseObj(e.data),a=u(n);e.processedData=n,e.displayData=a,t(e)}catch(e){s({message:"Failed to process file"})}}})},p=function(e){var t="var PreLoadedAssets = PreLoadedAssets || {};\n";return"image"==e.type?(t+='PreLoadedAssets["'+e.name+'"] = new Image();\n',t+='PreLoadedAssets["'+e.name+'"].src = "'+e.processedData.src+'"'):t+='PreLoadedAssets["'+e.name+'"] = '+r()(e.processedData),t}},37:function(e,t,s){"use strict";(function(e){var t=s(21),n=s.n(t),a=s(38),i=s.n(a),r=s(39),o=s.n(r),l=s(40),c=s.n(l),d=s(65),u=s.n(d);!function(t,s){"object"===u()(e)&&e.exports?e.exports=s():t.Objs=s()}(this,function(){var e={},t=function(){function e(t,s,n){o()(this,e),this.v=t,this.vt=s,this.vn=n}return c()(e,null,[{key:"fromValues",value:function(t){return new e(t[0],t[1],t[2])}}]),e}(),s=function e(t,s,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o()(this,e),this.a=t,this.b=s,this.c=n,this.mi=a},a=function e(){o()(this,e),this.vertices=[],this.normals=[],this.UVs=[],this.faces=[],this.groups={},this.materials=[],this.mtllibs=[]},r=function(e){return"string"==typeof e||e instanceof String},l=function(e,t){return e>=0?e-1:t.length+e},d=function(e){return[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]},u=function(e){return new i.a(function(t,s){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){200!=this.status&&s({status:n.status,statusText:n.statusText}),t(n.response)},n.onerror=function(){s({status:n.status,statusText:n.statusText})},n.send()})},v=function(e,t){if(e.length<3)throw new Error("Must have at least 3 vertices to triangulate");if(3==e.length)return[new s(e[0],e[1],e[2],t)];for(var n=[],a=e[0],i=2;i<e.length;i++){var r=e[i-1],o=e[i];n.push(new s(r,o,a,t))}return n};return e.loadObj=function(t){return u(t).then(function(t){return e.parseObj(t)})},e.parseObj=function(e){var s=new a,i=null,o=null;return e.split("\n").forEach(function(e){if(r(e)){var a=e.match(/\S+/g);if(a&&a.length)switch(a[0]){case"g":var c=1==a.length?["default"]:a.slice(1),u=!0,h=!1,f=void 0;try{for(var p,m=n()(c);!(u=(p=m.next()).done);u=!0){var g=p.value;s.groups[g]||(s.groups[g]=[])}}catch(e){h=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(h)throw f}}i=c;break;case"v":s.vertices.push(d(a));break;case"vt":s.UVs.push(d(a));break;case"vn":s.normals.push(d(a));break;case"f":if(a.length<3)throw Error("Error: face element must contain at least 3 indices");for(var _=[],w=1;w<a.length;w++){var y=a[w].split("/"),C=l(parseInt(y[0]),s.vertices),b=y[1]?l(parseInt(y[1]),s.UVs):null,S=y[2]?l(parseInt(y[2]),s.normals):null,U=new t(C,b,S);_.push(U)}var I=!0,E=!1,A=void 0;try{for(var x,D=n()(v(_,o));!(I=(x=D.next()).done);I=!0){var R=x.value;if(s.faces.push(R),i){var T=!0,k=!1,j=void 0;try{for(var L,$=n()(i);!(T=(L=$.next()).done);T=!0){var F=L.value;s.groups[F].push(R)}}catch(e){k=!0,j=e}finally{try{!T&&$.return&&$.return()}finally{if(k)throw j}}}}}catch(e){E=!0,A=e}finally{try{!I&&D.return&&D.return()}finally{if(E)throw A}}break;case"usemtl":var M=s.materials.indexOf(a[1]);M<0&&(M=s.materials.length,s.materials.push(a[1])),o=M;break;case"mtllib":s.mtllibs.push(a[1])}}}),s},e})}).call(t,s(118)(e))},54:function(e,t,s){s(107);var n=s(20)(s(55),s(114),null,null);e.exports=n.exports},55:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(21),a=s.n(n),i=s(110),r=s.n(i),o=s(111),l=s.n(o),c=s(109),d=s.n(c),u=s(35),v=s(37),h=s(36);t.default={name:"app",components:{Panel:r.a,Stage:l.a,NotificationCenter:d.a},data:function(){return{bus:new u.a,assetStore:[],UIState:{panelCentered:!0,selectedAsset:"",loadingAsset:!1}}},methods:{initiateDownload:function(){console.log("about to DL");var e=s.i(h.a)(this.UIState.selectedAsset),t=document.createElement("a"),n=new Blob([e],{type:"octet/stream"}),a=window.URL.createObjectURL(n);t.setAttribute("href",a),t.setAttribute("download",this.UIState.selectedAsset.name+".js"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},selectAsset:function(e){this.UIState.selectedAsset=e,this.$refs.stage.display.setViewing(e.displayData),console.log("selected:"+e)},loadedFile:function(e){var t=!0,s=!1,n=void 0;try{for(var i,r=a()(e);!(t=(i=r.next()).done);t=!0){var o=i.value;if(o.processedData=null,"obj"==o.type)try{o.processedData=v.Objs.parseObj(o.data)}catch(e){o.processedData=null}else o.processedData=new Image,o.processedData.src=o.data;o.processedData&&(this.UIState.loadingAsset=!1,this.assetStore.unshift(o),this.selectAsset(o))}}catch(e){s=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(s)throw n}}}},created:function(){var e=this;this.bus.$on("e_loadedFile",function(t){e.loadedFile(t)}),this.bus.$on("e_togglePanelCentered",function(){e.UIState.panelCentered&&(e.UIState.panelCentered=!1)}),this.bus.$on("e_user_selectedAsset",function(t){e.selectAsset(t)}),this.bus.$on("e_user_initiatedDownload",function(){e.initiateDownload()}),this.bus.$on("e_user_initiatedUpload",function(){e.UIState.loadingAsset=!0})}}},56:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"notificationCenter",data:function(){return{notis:[{name:"obj.obj",msg:"didnt work lol"}]}}}},57:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(36);t.default={name:"panel",methods:{selectAsset:function(e){this.$parent.bus.$emit("e_user_selectedAsset",e)},generate:function(e){var t=this,a=e.target.files||e.dataTransfer.files;if(a.length){this.$parent.bus.$emit("e_user_initiatedUpload");for(var i=[],r=0;r<a.length;r++)i.push(a[r]);i.forEach(function(e){s.i(n.b)(e).then(n.c).then(function(e){return t.$parent.bus.$emit("e_loadedFile",[e]),t.$parent.bus.$emit("e_togglePanelCentered"),e},function(e){return console.log(e),e}).then(function(){})})}}},props:["assets","UIState"],data:function(){return{}}}},58:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(59);t.default={name:"stage",created:function(){},mounted:function(){this.display.setRoot(this.$el.querySelector("#stage"))},methods:{initiateDownload:function(){this.$parent.bus.$emit("e_user_initiatedDownload")}},props:["UIState"],data:function(){return{display:new n.a}}}},59:function(e,t,s){"use strict";var n=s(39),a=s.n(n),i=s(40),r=s.n(i),o=800,l=600,c=new THREE.Vector3(0,0,1.7),d=function(){function e(){a()(this,e),this.root=null,this.container=document.createElement("div"),this.image=null,this.model=null,this.interval=null,this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialiasing:!0,alpha:!0}),this.initScene(o,l),this.renderer.setSize(o,l),this.initListeners()}return r()(e,[{key:"setRoot",value:function(e){this.root=e,this.root.appendChild(this.container)}},{key:"initScene",value:function(e,t){this.renderer.setClearColor(16777215,0),this.camera=new THREE.PerspectiveCamera(75,e/t,.01,100),this.scene.add(this.camera);var s=new THREE.AmbientLight(9408399);this.scene.add(s);var n=new THREE.SpotLight(16777215);n.position.set(0,10,0),this.scene.add(n);this.plane=new THREE.Mesh(new THREE.PlaneGeometry(3,3,4,4),new THREE.MeshBasicMaterial({color:16777215,wireframe:!0})),this.plane.rotation.x=Math.PI/2,this.plane.position.y=-1,this.scene.add(this.plane)}},{key:"initListeners",value:function(){var e=this,t=this.renderer.domElement,s=function(e,t){var s=e.getBoundingClientRect();return[t.clientX-s.left,t.clientY-s.top]},n=!1,a=null;t.addEventListener("mousemove",function(t){if(e.model&&a){var n=s(e.renderer.domElement,t);e.model.rotation.y+=(n[0]-a[0])/100,e.model.rotation.x+=(n[1]-a[1])/100,a=n}}),t.addEventListener("mousedown",function(t){n=!0,a=s(e.renderer.domElement,t)}),t.addEventListener("mouseup",function(){n=!1,a=null});var i=function(t){var s=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));e.camera.position.z-=s};t.addEventListener("mousewheel",i),t.addEventListener("DOMMouseScroll",i)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"startRendering",value:function(){var e=this;null==this.interval&&(this.interval=setInterval(function(){e.render()},17))}},{key:"stopRendering",value:function(){clearInterval(this.interval),this.interval=null}},{key:"resize",value:function(e,t){this.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}},{key:"setViewing",value:function(e){this.camera.position.copy(c),this.model&&(this.scene.remove(this.model),this.stopRendering(),this.container.removeChild(this.renderer.domElement),this.model=null),this.image&&(this.container.style.background="",this.image=null),e instanceof Image?(this.image=e,this.container.style.backgroundImage="url("+e.src+")",this.container.className="imageBox"):e&&(this.scene.add(e),this.model=e,this.startRendering(),this.container.appendChild(this.renderer.domElement))}}]),e}();t.a=d},60:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(35),a=s(54),i=s.n(a);n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:i.a}})}},[60]);
//# sourceMappingURL=app.9ea16dbc758db79c0e5b.js.map